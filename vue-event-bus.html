<!DOCTYPE html>
<html lang="en-US" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Replacing a Vue 2 Global Event Bus with Pinia üçç | Ryan Sereno</title>
    <meta name="description" content="I write about Software, Art, Poetry, and Frugality">
    <meta name="generator" content="VitePress v1.1.4">
    <link rel="preload stylesheet" href="/assets/style.CoeFZO01.css" as="style">
    
    <script type="module" src="/assets/app.CtK3Puys.js"></script>
    <link rel="modulepreload" href="/assets/chunks/framework.D4geoam_.js">
    <link rel="modulepreload" href="/assets/chunks/theme.cpy2a7mI.js">
    <link rel="modulepreload" href="/assets/vue-event-bus.md.Mzcad5iW.lean.js">
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
    <link rel="preload" href="/assets/ClassicXtraRound-Medium.D2jB9frL.ttf" as="font" type="font/ttf" crossorigin="anonymous">
    <meta property="og:title" content="Replacing a Vue 2 Global Event Bus with Pinia üçç">
    <meta property="og:type" content="article">
    <meta property="og:image" content="/assets/protein-shape-forces-bonds-self-assembly-folding-l.Cc9O9RXM.jpg">
    <meta property="og:url" content="https://ryansereno.com/vue-event-bus.md">
    <meta property="og:description" content="">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="@ry_serene">
    <meta name="twitter:title" content="Replacing a Vue 2 Global Event Bus with Pinia üçç">
    <meta name="twitter:description" content="">
    <meta name="twitter:image" content="/assets/protein-shape-forces-bonds-self-assembly-folding-l.Cc9O9RXM.jpg">
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-5d98c3a5><!--[--><!--]--><!--[--><span tabindex="-1" data-v-0f60ec36></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-0f60ec36> Skip to content </a><!--]--><!----><header class="VPNav" data-v-5d98c3a5 data-v-ae24b3ad><div class="VPNavBar top" data-v-ae24b3ad data-v-ccf7ddec><div class="wrapper" data-v-ccf7ddec><div class="container" data-v-ccf7ddec><div class="title" data-v-ccf7ddec><div class="VPNavBarTitle" data-v-ccf7ddec data-v-ab179fa1><a class="title" href="/" data-v-ab179fa1><!--[--><!--]--><!----><span data-v-ab179fa1>Ryan Sereno</span><!--[--><!--]--></a></div></div><div class="content" data-v-ccf7ddec><div class="content-body" data-v-ccf7ddec><!--[--><!--]--><div class="VPNavBarSearch search" data-v-ccf7ddec><!----></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-ccf7ddec data-v-7f418b0f><span id="main-nav-aria-label" class="visually-hidden" data-v-7f418b0f>Main Navigation</span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/about.html" tabindex="0" data-v-7f418b0f data-v-9c663999><!--[--><span data-v-9c663999>About</span><!--]--></a><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-ccf7ddec data-v-e6aabb21><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title="Switch to dark theme" aria-checked="false" data-v-e6aabb21 data-v-d1f28634 data-v-1d5665e3><span class="check" data-v-1d5665e3><span class="icon" data-v-1d5665e3><!--[--><span class="vpi-sun sun" data-v-d1f28634></span><span class="vpi-moon moon" data-v-d1f28634></span><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-ccf7ddec data-v-0394ad82 data-v-7bc22406><!--[--><a class="VPSocialLink no-icon" href="https://github.com/ryansereno" aria-label="github" target="_blank" rel="noopener" data-v-7bc22406 data-v-eee4e7cb><span class="vpi-social-github" /></a><a class="VPSocialLink no-icon" href="https://twitter.com/ry_serene" aria-label="Ryan&#39;s Twitter" target="_blank" rel="noopener" data-v-7bc22406 data-v-eee4e7cb><svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="48" height="48" viewBox="5 4 40 40"> <path fill="#03A9F4" d="M42,12.429c-1.323,0.586-2.746,0.977-4.247,1.162c1.526-0.906,2.7-2.351,3.251-4.058c-1.428,0.837-3.01,1.452-4.693,1.776C34.967,9.884,33.05,9,30.926,9c-4.08,0-7.387,3.278-7.387,7.32c0,0.572,0.067,1.129,0.193,1.67c-6.138-0.308-11.582-3.226-15.224-7.654c-0.64,1.082-1,2.349-1,3.686c0,2.541,1.301,4.778,3.285,6.096c-1.211-0.037-2.351-0.374-3.349-0.914c0,0.022,0,0.055,0,0.086c0,3.551,2.547,6.508,5.923,7.181c-0.617,0.169-1.269,0.263-1.941,0.263c-0.477,0-0.942-0.054-1.392-0.135c0.94,2.902,3.667,5.023,6.898,5.086c-2.528,1.96-5.712,3.134-9.174,3.134c-0.598,0-1.183-0.034-1.761-0.104C9.268,36.786,13.152,38,17.321,38c13.585,0,21.017-11.156,21.017-20.834c0-0.317-0.01-0.633-0.025-0.945C39.763,15.197,41.013,13.905,42,12.429"></path></svg></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-ccf7ddec data-v-d0bd9dde data-v-b6c34ac9><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-b6c34ac9><span class="vpi-more-horizontal icon" data-v-b6c34ac9></span></button><div class="menu" data-v-b6c34ac9><div class="VPMenu" data-v-b6c34ac9 data-v-e7ea1737><!----><!--[--><!--[--><!----><div class="group" data-v-d0bd9dde><div class="item appearance" data-v-d0bd9dde><p class="label" data-v-d0bd9dde>Appearance</p><div class="appearance-action" data-v-d0bd9dde><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title="Switch to dark theme" aria-checked="false" data-v-d0bd9dde data-v-d1f28634 data-v-1d5665e3><span class="check" data-v-1d5665e3><span class="icon" data-v-1d5665e3><!--[--><span class="vpi-sun sun" data-v-d1f28634></span><span class="vpi-moon moon" data-v-d1f28634></span><!--]--></span></span></button></div></div></div><div class="group" data-v-d0bd9dde><div class="item social-links" data-v-d0bd9dde><div class="VPSocialLinks social-links-list" data-v-d0bd9dde data-v-7bc22406><!--[--><a class="VPSocialLink no-icon" href="https://github.com/ryansereno" aria-label="github" target="_blank" rel="noopener" data-v-7bc22406 data-v-eee4e7cb><span class="vpi-social-github" /></a><a class="VPSocialLink no-icon" href="https://twitter.com/ry_serene" aria-label="Ryan&#39;s Twitter" target="_blank" rel="noopener" data-v-7bc22406 data-v-eee4e7cb><svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="48" height="48" viewBox="5 4 40 40"> <path fill="#03A9F4" d="M42,12.429c-1.323,0.586-2.746,0.977-4.247,1.162c1.526-0.906,2.7-2.351,3.251-4.058c-1.428,0.837-3.01,1.452-4.693,1.776C34.967,9.884,33.05,9,30.926,9c-4.08,0-7.387,3.278-7.387,7.32c0,0.572,0.067,1.129,0.193,1.67c-6.138-0.308-11.582-3.226-15.224-7.654c-0.64,1.082-1,2.349-1,3.686c0,2.541,1.301,4.778,3.285,6.096c-1.211-0.037-2.351-0.374-3.349-0.914c0,0.022,0,0.055,0,0.086c0,3.551,2.547,6.508,5.923,7.181c-0.617,0.169-1.269,0.263-1.941,0.263c-0.477,0-0.942-0.054-1.392-0.135c0.94,2.902,3.667,5.023,6.898,5.086c-2.528,1.96-5.712,3.134-9.174,3.134c-0.598,0-1.183-0.034-1.761-0.104C9.268,36.786,13.152,38,17.321,38c13.585,0,21.017-11.156,21.017-20.834c0-0.317-0.01-0.633-0.025-0.945C39.763,15.197,41.013,13.905,42,12.429"></path></svg></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-ccf7ddec data-v-e5dd9c1c><span class="container" data-v-e5dd9c1c><span class="top" data-v-e5dd9c1c></span><span class="middle" data-v-e5dd9c1c></span><span class="bottom" data-v-e5dd9c1c></span></span></button></div></div></div></div><div class="divider" data-v-ccf7ddec><div class="divider-line" data-v-ccf7ddec></div></div></div><!----></header><div class="VPLocalNav empty fixed" data-v-5d98c3a5 data-v-a6f0e41e><div class="container" data-v-a6f0e41e><!----><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-a6f0e41e data-v-17a5e62e><button data-v-17a5e62e>Return to top</button><!----></div></div></div><!----><div class="VPContent" id="VPContent" data-v-5d98c3a5 data-v-1428d186><div class="VPDoc" data-v-1428d186 data-v-39a288b8><!--[--><!--]--><div class="container" data-v-39a288b8><!----><div class="content" data-v-39a288b8><div class="content-container" data-v-39a288b8><!--[--><!--]--><main class="main" data-v-39a288b8><div style="position:relative;" class="vp-doc _vue-event-bus" data-v-39a288b8><div><h1 id="replacing-a-vue-2-global-event-bus-with-pinia-üçç" tabindex="-1">Replacing a Vue 2 Global Event Bus with Pinia üçç <a class="header-anchor" href="#replacing-a-vue-2-global-event-bus-with-pinia-üçç" aria-label="Permalink to &quot;Replacing a Vue 2 Global Event Bus with Pinia üçç&quot;">‚Äã</a></h1><p>Date: February 25, 2023</p><p>An event bus allows components to communicate with each other by emitting and listening for events.</p><p>This can be useful when indirectly related components need to communicate with each other or when passing data through props would be cumbersome or impractical.</p><p>Vue 2 supported the ability to have a global pub/sub event bus.</p><p>Component events could be easily connected together without prop drilling or global state.</p><p>This was easy to implement and, resultantly, easy to become dependent on.</p><p>Some large code bases became more difficult to maintain, due to the nebulous origins of events.</p><p>The event bus is not natively available in Vue 3, but a very similar implementation can be achieved with the <a href="https://github.com/developit/mitt" target="_blank" rel="noreferrer">Mitt</a> library, and is an effective solution for small applications.</p><p>This solution will be disregarded here though, as it has the same inherent issues as the original event bus implementation, and the global event bus is not recommended by the Vue team.</p><p>Instead, we will implement global events with Pinia, <a href="https://v3-migration.vuejs.org/breaking-changes/events-api.html#event-bus" target="_blank" rel="noreferrer">one of the approaches</a> recommended for large applications by the Vue team.</p><p>Using a state manager like Pinia or Vuex also allows for a centralized and diagnosable way of sharing events globally.</p><hr><p>Using the example of a sidebar that can be toggled open or closed, we will implement a similar emitter/listener mechanism.</p><p>The open/closed state of the sidebar will be toggled by a button in a separate component.</p><p>We first create a Pinia store, to save the state of the sidebar component (open/closed):</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes catppuccin-macchiato night-owl vp-code"><code><span class="line"><span style="--shiki-light:#6E738D;--shiki-dark:#637777;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">//</span><span style="--shiki-light:#6E738D;--shiki-dark:#637777;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">UiStore.js</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#C6A0F6;--shiki-dark:#C792EA;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">import</span><span style="--shiki-light:#939AB7;--shiki-dark:#D6DEEB;"> {</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#D6DEEB;"> defineStore </span><span style="--shiki-light:#939AB7;--shiki-dark:#D6DEEB;">}</span><span style="--shiki-light:#C6A0F6;--shiki-dark:#C792EA;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> from</span><span style="--shiki-light:#A6DA95;--shiki-dark:#D9F5DD;"> &quot;</span><span style="--shiki-light:#A6DA95;--shiki-dark:#ECC48D;">pinia</span><span style="--shiki-light:#A6DA95;--shiki-dark:#D9F5DD;">&quot;</span><span style="--shiki-light:#939AB7;--shiki-dark:#D6DEEB;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#C6A0F6;--shiki-dark:#C792EA;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">export</span><span style="--shiki-light:#C6A0F6;--shiki-dark:#C792EA;"> const</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#82AAFF;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> useUiStore</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#C792EA;"> =</span><span style="--shiki-light:#8AADF4;--shiki-dark:#82AAFF;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> defineStore</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#D6DEEB;">(</span><span style="--shiki-light:#A6DA95;--shiki-dark:#D9F5DD;">&quot;</span><span style="--shiki-light:#A6DA95;--shiki-dark:#ECC48D;">mode</span><span style="--shiki-light:#A6DA95;--shiki-dark:#D9F5DD;">&quot;</span><span style="--shiki-light:#939AB7;--shiki-dark:#C792EA;">,</span><span style="--shiki-light:#939AB7;--shiki-dark:#C792EA;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6E738D;--shiki-dark:#637777;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">		//</span><span style="--shiki-light:#6E738D;--shiki-dark:#637777;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">is sidebar Open or Closed</span></span>
<span class="line"><span style="--shiki-light:#8AADF4;--shiki-dark:#82AAFF;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    state</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#C792EA;">:</span><span style="--shiki-light:#939AB7;--shiki-dark:#D9F5DD;"> ()</span><span style="--shiki-light:#C6A0F6;--shiki-dark:#C792EA;"> =&gt;</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#D6DEEB;"> (</span><span style="--shiki-light:#939AB7;--shiki-dark:#C792EA;">{</span></span>
<span class="line"><span style="--shiki-light:#CAD3F5;--shiki-dark:#C792EA;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">        sideBarOpen</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#C792EA;">:</span><span style="--shiki-light:#F5A97F;--shiki-dark:#FF5874;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> true</span></span>
<span class="line"><span style="--shiki-light:#939AB7;--shiki-dark:#C792EA;">    }</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#D6DEEB;">)</span><span style="--shiki-light:#939AB7;--shiki-dark:#C792EA;">,</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6E738D;--shiki-dark:#637777;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">		//</span><span style="--shiki-light:#6E738D;--shiki-dark:#637777;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">toggle the open/closed state of the sidebar</span></span>
<span class="line"><span style="--shiki-light:#CAD3F5;--shiki-dark:#C792EA;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">    actions</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#C792EA;">:</span><span style="--shiki-light:#939AB7;--shiki-dark:#C792EA;"> {</span></span>
<span class="line"><span style="--shiki-light:#8AADF4;--shiki-dark:#82AAFF;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        toggleSideBarOpen</span><span style="--shiki-light:#939AB7;--shiki-dark:#D9F5DD;">()</span><span style="--shiki-light:#939AB7;--shiki-dark:#C792EA;"> {</span></span>
<span class="line"><span style="--shiki-light:#ED8796;--shiki-dark:#7FDBCA;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">            this</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#C792EA;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">.</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#BAEBE2;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">sidebarOpen</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#C792EA;"> =</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#C792EA;"> !</span><span style="--shiki-light:#ED8796;--shiki-dark:#7FDBCA;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">this</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#C792EA;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">.</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#BAEBE2;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">sidebarOpen</span><span style="--shiki-light:#939AB7;--shiki-dark:#C792EA;">;</span></span>
<span class="line"><span style="--shiki-light:#939AB7;--shiki-dark:#C792EA;">        },</span></span>
<span class="line"><span style="--shiki-light:#939AB7;--shiki-dark:#C792EA;">    }</span></span>
<span class="line"><span style="--shiki-light:#939AB7;--shiki-dark:#C792EA;">}</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#D6DEEB;">)</span></span></code></pre></div><p>Then in the Sidebar component, we can use a computed property to get the UI state of the sidebar (open/closed), and use the watch hook to monitor that state:</p><div class="language-vue vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki shiki-themes catppuccin-macchiato night-owl vp-code"><code><span class="line"><span style="--shiki-light:#CAD3F5;--shiki-dark:#D6DEEB;">//Sidebar.vue</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#8BD5CA;--shiki-dark:#7FDBCA;">&lt;</span><span style="--shiki-light:#8AADF4;--shiki-dark:#CAECE6;">template</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#7FDBCA;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#8BD5CA;--shiki-dark:#7FDBCA;">	&lt;</span><span style="--shiki-light:#8AADF4;--shiki-dark:#CAECE6;">sidebar</span><span style="--shiki-light:#EED49F;--shiki-dark:#C5E478;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> ref</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#7FDBCA;">=</span><span style="--shiki-light:#A6DA95;--shiki-dark:#D9F5DD;">&quot;</span><span style="--shiki-light:#A6DA95;--shiki-dark:#ECC48D;">sidebar</span><span style="--shiki-light:#A6DA95;--shiki-dark:#D9F5DD;">&quot;</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#7FDBCA;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#8BD5CA;--shiki-dark:#7FDBCA;">	&lt;</span><span style="--shiki-light:#8AADF4;--shiki-dark:#CAECE6;">sidebar</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#7FDBCA;">/&gt;</span></span>
<span class="line"><span style="--shiki-light:#8BD5CA;--shiki-dark:#7FDBCA;">&lt;</span><span style="--shiki-light:#8AADF4;--shiki-dark:#CAECE6;">template</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#7FDBCA;">/&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#8BD5CA;--shiki-dark:#7FDBCA;">&lt;</span><span style="--shiki-light:#8AADF4;--shiki-dark:#CAECE6;">script</span><span style="--shiki-light:#EED49F;--shiki-dark:#C5E478;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> setup</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#7FDBCA;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#C6A0F6;--shiki-dark:#C792EA;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">import</span><span style="--shiki-light:#939AB7;--shiki-dark:#D6DEEB;"> {</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#D6DEEB;"> useUiStore </span><span style="--shiki-light:#939AB7;--shiki-dark:#D6DEEB;">}</span><span style="--shiki-light:#C6A0F6;--shiki-dark:#C792EA;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> from</span><span style="--shiki-light:#A6DA95;--shiki-dark:#D9F5DD;"> &quot;</span><span style="--shiki-light:#A6DA95;--shiki-dark:#ECC48D;">@/stores/UI</span><span style="--shiki-light:#A6DA95;--shiki-dark:#D9F5DD;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#C6A0F6;--shiki-dark:#C792EA;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">import</span><span style="--shiki-light:#939AB7;--shiki-dark:#D6DEEB;"> {</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#D6DEEB;">watch</span><span style="--shiki-light:#939AB7;--shiki-dark:#D6DEEB;">,</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#D6DEEB;">computed</span><span style="--shiki-light:#939AB7;--shiki-dark:#D6DEEB;">}</span><span style="--shiki-light:#C6A0F6;--shiki-dark:#C792EA;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> from</span><span style="--shiki-light:#A6DA95;--shiki-dark:#D9F5DD;"> &#39;</span><span style="--shiki-light:#A6DA95;--shiki-dark:#ECC48D;">vue</span><span style="--shiki-light:#A6DA95;--shiki-dark:#D9F5DD;">&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#C6A0F6;--shiki-dark:#C792EA;">const</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#82AAFF;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> sidebar</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#C792EA;"> =</span><span style="--shiki-light:#8AADF4;--shiki-dark:#82AAFF;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> ref</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#D6DEEB;">(</span><span style="--shiki-light:#C6A0F6;--shiki-dark:#FF5874;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">null</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#D6DEEB;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6E738D;--shiki-dark:#637777;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">//</span><span style="--shiki-light:#6E738D;--shiki-dark:#637777;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">Use UI store</span></span>
<span class="line"><span style="--shiki-light:#C6A0F6;--shiki-dark:#C792EA;">const</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#82AAFF;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> uiStore</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#C792EA;"> =</span><span style="--shiki-light:#8AADF4;--shiki-dark:#82AAFF;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> useUiStore</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#D6DEEB;">()</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6E738D;--shiki-dark:#637777;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">//</span><span style="--shiki-light:#6E738D;--shiki-dark:#637777;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">Get the open/close state of the sidebar</span></span>
<span class="line"><span style="--shiki-light:#C6A0F6;--shiki-dark:#C792EA;">const</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#82AAFF;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> sidebarOpen</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#C792EA;"> =</span><span style="--shiki-light:#8AADF4;--shiki-dark:#82AAFF;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> computed</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#D6DEEB;">(</span><span style="--shiki-light:#939AB7;--shiki-dark:#D9F5DD;">()</span><span style="--shiki-light:#C6A0F6;--shiki-dark:#C792EA;">=&gt;</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#7FDBCA;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">uiStore</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#C792EA;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">.</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#BAEBE2;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">sidebarOpen</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#D6DEEB;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6E738D;--shiki-dark:#637777;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">//</span><span style="--shiki-light:#6E738D;--shiki-dark:#637777;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">Watch for changes to the sidebar state, and show/hide the sidebar accordingly</span></span>
<span class="line"><span style="--shiki-light:#8AADF4;--shiki-dark:#82AAFF;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">watch</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#D6DEEB;">(</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#D7DBE0;">sidebarOpen</span><span style="--shiki-light:#939AB7;--shiki-dark:#D6DEEB;">,</span><span style="--shiki-light:#939AB7;--shiki-dark:#D9F5DD;">(</span><span style="--shiki-light:#EE99A0;--shiki-dark:#D7DBE0;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">newVal</span><span style="--shiki-light:#939AB7;--shiki-dark:#D9F5DD;">)</span><span style="--shiki-light:#C6A0F6;--shiki-dark:#C792EA;">=&gt;</span><span style="--shiki-light:#939AB7;--shiki-dark:#D6DEEB;">{</span></span>
<span class="line"><span style="--shiki-light:#C6A0F6;--shiki-dark:#C792EA;">    if</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#D6DEEB;">(</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#D7DBE0;">newVal</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#D6DEEB;">)</span><span style="--shiki-light:#939AB7;--shiki-dark:#D6DEEB;">{</span></span>
<span class="line"><span style="--shiki-light:#CAD3F5;--shiki-dark:#7FDBCA;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">    sidebar</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#C792EA;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">.</span><span style="--shiki-light:#8AADF4;--shiki-dark:#82AAFF;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">show</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#D6DEEB;">()</span></span>
<span class="line"><span style="--shiki-light:#939AB7;--shiki-dark:#D6DEEB;">    }</span><span style="--shiki-light:#C6A0F6;--shiki-dark:#C792EA;">else</span><span style="--shiki-light:#939AB7;--shiki-dark:#D6DEEB;">{</span></span>
<span class="line"><span style="--shiki-light:#CAD3F5;--shiki-dark:#7FDBCA;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">    sidebar</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#C792EA;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">.</span><span style="--shiki-light:#8AADF4;--shiki-dark:#82AAFF;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">hide</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#D6DEEB;">()</span></span>
<span class="line"><span style="--shiki-light:#939AB7;--shiki-dark:#D6DEEB;">    }</span></span>
<span class="line"><span style="--shiki-light:#939AB7;--shiki-dark:#D6DEEB;">}</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#D6DEEB;">)</span></span>
<span class="line"><span style="--shiki-light:#8BD5CA;--shiki-dark:#7FDBCA;">&lt;</span><span style="--shiki-light:#8AADF4;--shiki-dark:#CAECE6;">script</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#7FDBCA;">/&gt;</span></span></code></pre></div><p>Finally in the button component, we can import the toggle function from the Pinia store, and call it on a click event:</p><div class="language-vue vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki shiki-themes catppuccin-macchiato night-owl vp-code"><code><span class="line"><span style="--shiki-light:#CAD3F5;--shiki-dark:#D6DEEB;">//Button.vue</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#8BD5CA;--shiki-dark:#7FDBCA;">&lt;</span><span style="--shiki-light:#8AADF4;--shiki-dark:#CAECE6;">template</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#7FDBCA;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#8BD5CA;--shiki-dark:#7FDBCA;">&lt;</span><span style="--shiki-light:#8AADF4;--shiki-dark:#CAECE6;">button</span><span style="--shiki-light:#939AB7;--shiki-dark:#7FDBCA;"> @</span><span style="--shiki-light:#EED49F;--shiki-dark:#C5E478;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">click</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#7FDBCA;">=</span><span style="--shiki-light:#A6DA95;--shiki-dark:#D9F5DD;">&quot;</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#D6DEEB;">toggleSidebarOpen</span><span style="--shiki-light:#A6DA95;--shiki-dark:#D9F5DD;">&quot;</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#FFFFFF;">/</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#7FDBCA;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#8BD5CA;--shiki-dark:#7FDBCA;">&lt;</span><span style="--shiki-light:#8AADF4;--shiki-dark:#CAECE6;">template</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#7FDBCA;">/&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#8BD5CA;--shiki-dark:#7FDBCA;">&lt;</span><span style="--shiki-light:#8AADF4;--shiki-dark:#CAECE6;">script</span><span style="--shiki-light:#EED49F;--shiki-dark:#C5E478;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> setup</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#7FDBCA;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#C6A0F6;--shiki-dark:#C792EA;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">import</span><span style="--shiki-light:#939AB7;--shiki-dark:#D6DEEB;"> {</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#D6DEEB;"> useUiStore </span><span style="--shiki-light:#939AB7;--shiki-dark:#D6DEEB;">}</span><span style="--shiki-light:#C6A0F6;--shiki-dark:#C792EA;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> from</span><span style="--shiki-light:#A6DA95;--shiki-dark:#D9F5DD;"> &quot;</span><span style="--shiki-light:#A6DA95;--shiki-dark:#ECC48D;">@/stores/UI</span><span style="--shiki-light:#A6DA95;--shiki-dark:#D9F5DD;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#C6A0F6;--shiki-dark:#C792EA;">const</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#82AAFF;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> uiStore</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#C792EA;"> =</span><span style="--shiki-light:#8AADF4;--shiki-dark:#82AAFF;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> useUiStore</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#D6DEEB;">()</span></span>
<span class="line"><span style="--shiki-light:#C6A0F6;--shiki-dark:#C792EA;">function</span><span style="--shiki-light:#8AADF4;--shiki-dark:#82AAFF;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> toggleSidebarOpen</span><span style="--shiki-light:#939AB7;--shiki-dark:#D9F5DD;">()</span><span style="--shiki-light:#939AB7;--shiki-dark:#D6DEEB;"> {</span></span>
<span class="line"><span style="--shiki-light:#CAD3F5;--shiki-dark:#7FDBCA;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">    uiStore</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#C792EA;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">.</span><span style="--shiki-light:#8AADF4;--shiki-dark:#82AAFF;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">toggleSideBarOpen</span><span style="--shiki-light:#CAD3F5;--shiki-dark:#D6DEEB;">()</span></span>
<span class="line"><span style="--shiki-light:#939AB7;--shiki-dark:#D6DEEB;">}</span></span>
<span class="line"><span style="--shiki-light:#CAD3F5;--shiki-dark:#7FDBCA;">&lt;</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#7FDBCA;">/</span><span style="--shiki-light:#8AADF4;--shiki-dark:#CAECE6;">script</span><span style="--shiki-light:#8BD5CA;--shiki-dark:#7FDBCA;">&gt;</span></span></code></pre></div><p>Now the click event in the button component is being ‚Äòlistened‚Äô to by the sidebar component, without the need for prop drilling or an event bus.</p><p>This approach is slightly more verbose than the event bus approach in Vue 2, but due to its more declarative nature, it is easier to manage and understand the origin of events.</p><p>Pinia also has the subscribe() method, which can replace the watch hook, but subscribe() monitors the <em>entire</em> store.</p><p>If just a single state needs to be watched at a time but the UI store contains multiple states, the watch hook is the preferred approach.</p><p>Cover art: Still Life with Fruit, Jacobus Linthorst, 1808</p></div></div></main><footer class="VPDocFooter" data-v-39a288b8 data-v-d4a0bba5><!--[--><!--]--><!----><!----></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><!----><!--[--><!--]--></div></div>
    <script>window.__VP_HASH_MAP__=JSON.parse("{\"crystallization.md\":\"BES0hRG3\",\"nvim-dap.md\":\"DMfnstLL\",\"silent-world.md\":\"DFBLJCGC\",\"art.md\":\"BvjHbcQ1\",\"the-orchard.md\":\"CWFLR0D5\",\"vue-event-bus.md\":\"Mzcad5iW\",\"the-encyclopedias.md\":\"l0PRiPEY\",\"university.md\":\"Cg98uLAa\",\"my-curated-vim-command-collection.md\":\"BYcH4Yd_\",\"api-examples.md\":\"CVWG3xow\",\"reclaim-your-media.md\":\"CNPLvIvG\",\"pytorch.md\":\"CT646Tmt\",\"rnn.md\":\"fxbu20uN\",\"about.md\":\"DGikt4go\",\"intellectual-property.md\":\"ls2CA5gZ\",\"cellular-automata.md\":\"D2NVDhTk\",\"political-optimization.md\":\"BKhJ61V6\",\"autonomous-computer.md\":\"Dyf_N12O\",\"micro-llm.md\":\"Cw5iuyrb\",\"index.md\":\"CitdX7H0\",\"universal-function-approximators.md\":\"DVoidVYn\",\"religion-is-an-abstraction.md\":\"BYth-9s6\",\"self-attention.md\":\"CMBqWdYV\"}");window.__VP_SITE_DATA__=JSON.parse("{\"lang\":\"en-US\",\"dir\":\"ltr\",\"title\":\"Ryan Sereno\",\"description\":\"I write about Software, Art, Poetry, and Frugality\",\"base\":\"/\",\"head\":[],\"router\":{\"prefetchLinks\":true},\"appearance\":true,\"themeConfig\":{\"nav\":[{\"text\":\"About\",\"link\":\"/about\"}],\"sidebar\":[],\"socialLinks\":[{\"icon\":\"github\",\"link\":\"https://github.com/ryansereno\"},{\"icon\":{\"svg\":\"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" x=\\\"0px\\\" y=\\\"0px\\\" width=\\\"48\\\" height=\\\"48\\\" viewBox=\\\"5 4 40 40\\\"> <path fill=\\\"#03A9F4\\\" d=\\\"M42,12.429c-1.323,0.586-2.746,0.977-4.247,1.162c1.526-0.906,2.7-2.351,3.251-4.058c-1.428,0.837-3.01,1.452-4.693,1.776C34.967,9.884,33.05,9,30.926,9c-4.08,0-7.387,3.278-7.387,7.32c0,0.572,0.067,1.129,0.193,1.67c-6.138-0.308-11.582-3.226-15.224-7.654c-0.64,1.082-1,2.349-1,3.686c0,2.541,1.301,4.778,3.285,6.096c-1.211-0.037-2.351-0.374-3.349-0.914c0,0.022,0,0.055,0,0.086c0,3.551,2.547,6.508,5.923,7.181c-0.617,0.169-1.269,0.263-1.941,0.263c-0.477,0-0.942-0.054-1.392-0.135c0.94,2.902,3.667,5.023,6.898,5.086c-2.528,1.96-5.712,3.134-9.174,3.134c-0.598,0-1.183-0.034-1.761-0.104C9.268,36.786,13.152,38,17.321,38c13.585,0,21.017-11.156,21.017-20.834c0-0.317-0.01-0.633-0.025-0.945C39.763,15.197,41.013,13.905,42,12.429\\\"></path></svg>\"},\"link\":\"https://twitter.com/ry_serene\",\"ariaLabel\":\"Ryan's Twitter\"}],\"aside\":false},\"locales\":{},\"scrollOffset\":134,\"cleanUrls\":false}");</script>
    
  </body>
</html>